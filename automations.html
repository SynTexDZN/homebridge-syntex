<html>
    <title>Dashboard: Automations</title>
    <body>
        <h1 style="margin-bottom: 0; margin-top: 32px">Dashboard</h1>
        <div class="main" style="margin-top: 10px; display: table; margin-bottom: 100px">
            <p style="margin-bottom: 100px; margin-top: 16px">Automations</p>
            <div class="main" style="margin-top: 10px; margin-bottom: 20px; display: flex">
                <input class="white" type="button" value="Geräte" onclick="window.location.href='/'" style="margin-right: 20px">
                <input class="white" type="button" value="Bridge" onclick="window.location.href='/bridge'">
            </div>
            <div class="main" style="margin-top: 10px; display: flex">
                <input class="white" type="button" value="Automations" onclick="window.location.href='/automations'" style="margin-right: 20px" disabled>
                <input class="white" type="button" value="Log" onclick="window.location.href='/log'">
            </div>
        </div>
        <div class="main" id="automations" style="margin-bottom: 100px"></div>
        <form class="main" id="create">
            <h2>Automation Erstellen</h2>
        </form>
    </body>
</html>
<script>

    var automations = [];

    head.load('/js/query.js', async function()
    {
        automations = JSON.parse(await complexFetch('/serverside/automations', 10000, 3, {}, false));

        createAutomationPanels();
    });

    function createAutomationPanels()
    {
        for(var i = 0; i < automations.length; i++)
        {
            var panel = document.createElement('button');

            panel.innerHTML = automations[i].id + ' • ' + automations[i].name;

            if(i < automations.length - 1)
            {
                panel.style.marginBottom = '20px';
            }

            document.getElementById('automations').appendChild(panel);
        }
    }

</script>