<html>
    <title>Dashboard: Log</title>
    <body>
        <h1 style="margin-bottom: 0; margin-top: 32px">Dashboard</h1>
        <div class="main" style="margin-top: 10px; margin-bottom: 32px; display: table">
            <p style="margin-bottom: 100px; margin-top: 16px">Log</p>
            <div class="main" style="margin-top: 10px; margin-bottom: 20px; display: flex">
                <input class="white" type="button" value="Geräte" onclick="window.location.href='/'" style="margin-right: 20px">
                <input class="white" type="button" value="Bridge" onclick="window.location.href='/bridge'">
            </div>
            <div class="main" style="margin-top: 10px; margin-bottom: 100px; display: flex">
                <input class="white" type="button" value="Log" onclick="window.location.href='/log'" disabled>
            </div>
            <h2 style="width: fit-content">• Bridge Log •</h2>
            <div class="outline" id="bLog" style="margin-bottom: 100px;"></div>
            <h2 style="width: fit-content">• WebHook Log •</h2>
            <div class="outline" id="wLog"></div>
        </div>
    </body>
</html>
<script>

    var bLogJSON = JSON.parse('<%bLog%>');
    var wLogJSON = JSON.parse('<%wLog%>');

    for(var i = 0; i < bLogJSON.length; i++)
    {
        var element = document.createElement('div');

        element.setAttribute('level', bLogJSON[i].split('[')[1].split(']')[0]);
        //element.setAttribute('class', 'white');
        element.setAttribute('style', '');
        
        var log = bLogJSON[i].split(']')[0] + ']';

        if(bLogJSON[i].includes('(') && bLogJSON[i].includes(')'))
        {
            log += ' > ' + bLogJSON[i].split('(')[1].split(')')[0] + '<br>' + bLogJSON[i].replace(bLogJSON[i].split(']')[0] + '] ', '').split(' (')[0];
        }
        else
        {
            log += '<br>' + bLogJSON[i].replace(bLogJSON[i].split(']')[0] + '] ', '');
        }
        
        element.innerHTML = log;

        if(i != bLogJSON.length - 1)
        {
            element.setAttribute('style', element.getAttribute('style') + '; margin-bottom: 20px');
        }

        document.getElementById('bLog').appendChild(element);
    }

    for(var i = 0; i < wLogJSON.length; i++)
    {
        var element = document.createElement('div');

        element.setAttribute('level', wLogJSON[i].split('[')[1].split(']')[0]);
        //element.setAttribute('class', 'white');
        //element.setAttribute('style', 'border: ');

        var log = wLogJSON[i].split(']')[0] + ']';

        if(wLogJSON[i].includes('(') && wLogJSON[i].includes(')'))
        {
            log += ' > ' + wLogJSON[i].split('(')[1].split(')')[0] + '<br>' + wLogJSON[i].replace(wLogJSON[i].split(']')[0] + '] ', '').split(' (')[0];
        }
        else
        {
            log += '<br>' + wLogJSON[i].replace(wLogJSON[i].split(']')[0] + '] ', '');
        }

        element.innerHTML = log;

        if(i != wLogJSON.length - 1)
        {
            element.setAttribute('style', element.getAttribute('style') + '; margin-bottom: 20px');
        }

        document.getElementById('wLog').appendChild(element);
    }

</script>