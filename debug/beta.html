<html>
	<body>
		<div id="content">
			<title>Debug: Beta</title>
			<h1 style="margin-bottom: 0; margin-top: 32px">Debug</h1>
			<div id="beta" class="main">
				<p style="margin-bottom: 100px; margin-top: 20px">Beta Programm</p>
				<div class="main" style="margin-top: 10px; margin-bottom: 20px; display: flex">
					<input class="white" type="button" value="WORKAROUND" onclick="Essentials.leavePage('/debug')" style="margin-right: 20px">
					<input class="white" type="button" value="STYLE" onclick="Essentials.leavePage('/debug/style')">
				</div>
				<div class="main" style="margin-top: 10px; margin-bottom: 20px; display: flex">
					<input class="white" type="button" value="COMMAND" onclick="Essentials.leavePage('/debug/terminal')" style="margin-right: 20px">
					<input class="white" type="button" value="CONFIG" onclick="Essentials.leavePage('/debug/config')">
				</div>
				<div class="main" style="margin-top: 10px; margin-bottom: 20px; display: flex">
					<input class="white" type="button" value="BACKUP" onclick="Essentials.leavePage('/debug/backup')" style="margin-right: 20px">
					<input class="white" type="button" value="BETA" onclick="Essentials.leavePage('/debug/beta')" disabled>
				</div>
				<div class="type-container" style="margin: 100px auto; width: 500px">
					<div class="title-container">
						<h2 style="width: fit-content; margin-top: 0; border: none; padding-left: 16px">Beta Zugang</h2>
					</div>
					<input value="Laden .." id="beta-active" type="button" class="outline loading-loop" onclick="switchBeta(this)" style="border-width: 3px">
				</div>
				<div class="navigation-panel">
					<div class="sticky-inset">
						<div style="display: flex">
							<input id="back-btn" type="button" value="ZurÃ¼ck zum Dashboard" onclick="Essentials.leavePage('/')">
						</div>
					</div>
				</div>
			</div>
			<script type="module">

				import { Query } from '/js/query.js';
				import { Essentials } from '/js/essentials.js';
	
				Query.SETUP(Essentials);
				Essentials.SETUP(Query, Preloader);
			
				window.Query = Query;
				window.Essentials = Essentials;

				window.tag = '<%tag%>';

				if(tag != 'null' && tag != 'undefined')
				{
					if(tag == 'beta')
					{
						document.getElementById('beta-active').className = 'white';
						document.getElementById('beta-active').value = 'An';
					}
					else
					{
						document.getElementById('beta-active').value = 'Aus';
					}
				}

				Preloader.finish();
			
            </script>
            <script>

				function switchBeta(btn)
				{
					var enable = false;

					if(btn.hasAttribute('class') && btn.getAttribute('class') == 'white')
					{
						btn.setAttribute('class', 'outline');
						btn.setAttribute('value', 'Aus');
					}
					else
					{
						btn.setAttribute('class', 'white');
						btn.setAttribute('value', 'An');

						enable = true;
					}

					var overlays = {
						root : btn,
						id : 'restart',
						pending : { value : 'Neustarten ..' },
						executeError : { value : 'Neustart Fehlgeschlagen!' },
						connectionError : { value : 'Keine Verbindung zur Bridge!' }
					};

					Query.complexFetch('/serverside/beta?enable=' + enable, 5000, 2, {}, true);
				}
			
			</script>
		</div>
	</body>
</html>